{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\mirta\\\\Desktop\\\\Projekt R-mobilna\\\\SpaceInvaders\\\\context\\\\classContext.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useCallback, useContext, useState } from 'react';\nimport { AxiosInstance } from \"../auth/AxiosInstance\";\nvar initialStudentData = {\n  students: [],\n  teacherName: ''\n};\nexport default function StudentsProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      students = _useState2[0],\n      setStudents = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      teacherName = _useState4[0],\n      setTeacherName = _useState4[1];\n\n  var getClass = useCallback(function _callee(classId) {\n    var res;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AxiosInstance.get('/class', {\n              params: {\n                classId: classId\n              }\n            }));\n\n          case 3:\n            res = _context.sent;\n            setTeacherName(res.data.teacherName);\n            return _context.abrupt(\"return\", setStudents(res.data.students));\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", console.error(_context.t0));\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  }, []);\n  return React.createElement(StudentsContext.Provider, {\n    value: {\n      students: students,\n      getClass: getClass,\n      teacherName: teacherName\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 10\n    }\n  }, children);\n}\nexport var StudentsContext = createContext(initialStudentData);\nexport var useStudentsData = function useStudentsData() {\n  return useContext(StudentsContext);\n};","map":{"version":3,"sources":["C:/Users/mirta/Desktop/Projekt R-mobilna/SpaceInvaders/context/classContext.tsx"],"names":["React","createContext","useCallback","useContext","useState","AxiosInstance","initialStudentData","students","teacherName","StudentsProvider","children","setStudents","setTeacherName","getClass","classId","get","params","res","data","console","error","StudentsContext","useStudentsData"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,WAA/B,EAA4CC,UAA5C,EAAwDC,QAAxD,QAAwE,OAAxE;AACA,SAASC,aAAT;AAsBA,IAAMC,kBAAmC,GAAG;AAC1CC,EAAAA,QAAQ,EAAE,EADgC;AAE1CC,EAAAA,WAAW,EAAE;AAF6B,CAA5C;AAQA,eAAe,SAASC,gBAAT,OAA8E;AAAA,MAAlDC,QAAkD,QAAlDA,QAAkD;;AAC3F,kBAAgCN,QAAQ,CAAa,EAAb,CAAxC;AAAA;AAAA,MAAOG,QAAP;AAAA,MAAiBI,WAAjB;;AACA,mBAAsCP,QAAQ,CAAC,EAAD,CAA9C;AAAA;AAAA,MAAOI,WAAP;AAAA,MAAoBI,cAApB;;AAEA,MAAMC,QAAQ,GAAGX,WAAW,CAAC,iBAAOY,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEPT,aAAa,CAACU,GAAd,CAAkB,QAAlB,EAA4B;AAC5CC,cAAAA,MAAM,EAAE;AAAEF,gBAAAA,OAAO,EAAEA;AAAX;AADoC,aAA5B,CAFO;;AAAA;AAEnBG,YAAAA,GAFmB;AAKzBL,YAAAA,cAAc,CAACK,GAAG,CAACC,IAAJ,CAASV,WAAV,CAAd;AALyB,6CAMlBG,WAAW,CAACM,GAAG,CAACC,IAAJ,CAASX,QAAV,CANO;;AAAA;AAAA;AAAA;AAAA,6CAQlBY,OAAO,CAACC,KAAR,aARkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,EAUzB,EAVyB,CAA5B;AAYA,SAAO,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAE;AAAEb,MAAAA,QAAQ,EAARA,QAAF;AAAYM,MAAAA,QAAQ,EAARA,QAAZ;AAAsBL,MAAAA,WAAW,EAAXA;AAAtB,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuEE,QAAvE,CAAP;AACD;AAED,OAAO,IAAMW,eAAe,GAAGpB,aAAa,CAACK,kBAAD,CAArC;AAEP,OAAO,IAAMgB,eAAe,GAAG,SAAlBA,eAAkB;AAAA,SAAoBnB,UAAU,CAACkB,eAAD,CAA9B;AAAA,CAAxB","sourcesContent":["import React, { createContext, useCallback, useContext, useState } from 'react';\r\nimport { AxiosInstance } from '../auth/AxiosInstance';\r\n\r\nexport interface IStudent {\r\n  name: string;\r\n  surname: string;\r\n  studentId: string;\r\n}\r\n\r\ninterface IStudentContext {\r\n  students: IStudent[];\r\n  teacherName: string;\r\n  /*classId: number; //string */\r\n}\r\n\r\ninterface IStudentMethods {\r\n  getClass: (classId: string) => void;\r\n}\r\n\r\ninterface IStudentProvider {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst initialStudentData: IStudentContext = {\r\n  students: [],\r\n  teacherName: '',\r\n  /*classId: 0, */\r\n};\r\n\r\ninterface IStudentData extends IStudentContext, IStudentMethods {}\r\n\r\nexport default function StudentsProvider({ children }: IStudentProvider): React.ReactElement {\r\n  const [students, setStudents] = useState<IStudent[]>([]);\r\n  const [teacherName, setTeacherName] = useState('');\r\n\r\n  const getClass = useCallback(async (classId: string) => {\r\n    try {\r\n      const res = await AxiosInstance.get('/class', {\r\n        params: { classId: classId },\r\n      });\r\n      setTeacherName(res.data.teacherName);\r\n      return setStudents(res.data.students);\r\n    } catch (err) {\r\n      return console.error(err);\r\n    }\r\n  }, []);\r\n\r\n  return <StudentsContext.Provider value={{ students, getClass, teacherName }}>{children}</StudentsContext.Provider>;\r\n}\r\n\r\nexport const StudentsContext = createContext(initialStudentData as IStudentData);\r\n\r\nexport const useStudentsData = (): IStudentData => useContext(StudentsContext);\r\n"]},"metadata":{},"sourceType":"module"}